---
format: html
---

<nav class="govuk-breadcrumbs" aria-label="Breadcrumb">
 <ol class="govuk-breadcrumbs__list">
  <li class="govuk-breadcrumbs__list-item">
   <a class="govuk-breadcrumbs__link" href="../index.qmd">Home</a>
  </li>
  <li class="govuk-breadcrumbs__list-item">
   <span aria-current="page">Forms and Actions</span>
  </li>
 </ol>
</nav>

<h1 class="govuk-heading-xl govuk-!-margin-top-6 govuk-!-margin-bottom-6">Forms and Actions</h1>

<h3 class="govuk-heading-m>Tax Calculator</h3>

<form action="/pay" method="post" class="govuk-!-margin-bottom-6 govuk-form-group">
  <label for="hours" class="govuk-label govuk-label--m">Number of hours worked:</label>
  <input type="number" id="hours" name="hours" min="0" step="0.01" class="govuk-input" required>
  <button type="submit" class="govuk-button govuk-!-margin-top-3">Calculate Pay</button>
  {% if pay_result is defined %}
    <div class="govuk-inset-text govuk-!-margin-top-3">Pay after tax: Â£{{ "%.2f"|format(pay_result) }}</div>
  {% endif %}
</form>

<h3 class="govuk-heading-m>Word Count</h3>

<form action="/wordcount" method="post" class="govuk-form-group">
  <label for="userText" class="govuk-label govuk-label--m">Enter your text:</label>
  <span id="userText-hint" class="govuk-hint">Type or paste your text to count the words.</span>
  <textarea
      id="userText"
      name="userText"
      class="govuk-textarea"
      aria-describedby="userText-hint wordCount"
      rows="8"
      style="width:100%; max-width:100%;"
      spellcheck="true"
      autocomplete="off"
      inputmode="text"
  >{{ user_text|default('') }}</textarea>
  <button type="submit" class="govuk-button govuk-!-margin-top-3">Count Words</button>
  <div
    id="wordCount"
    class="govuk-inset-text govuk-!-margin-top-3"
    aria-live="polite"
    style="font-weight:bold;"
    tabindex="0"
  >
    {% if word_count is defined %}
      Word count: {{ word_count }}
    {% else %}
      Word count: 0
    {% endif %}
  </div>
</form>

<script>
function countWords(str) {
  str = str.trim();
  if (!str) return 0;
  // Split on any sequence of whitespace
  return str.split(/\s+/).length;
}
const textarea = document.getElementById('userText');
const countDisplay = document.getElementById('wordCount');
if (textarea) {
  textarea.addEventListener('input', function() {
    countDisplay.textContent = "Word count: " + countWords(this.value);
  });
}
</script>
